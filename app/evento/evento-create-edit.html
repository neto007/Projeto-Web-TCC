<div id="evento-create-edit" class="{{::$ctrl.styles.default}}" layout="column" layout-align="center center">

    <form name="eventoForm" ng-submit="$ctrl.salvar(eventoForm.$valid)" novalidate>
        <div class="md-padding" layout-xs="column" layout="row">
            <div class="wrap" flex-gt-sm="50" flex="50">
                <md-card class="{{::$ctrl.styles.cardEvento}}" type='file' id="upload" style="text-align:center;min-height:490px;">

                    <div ng-if="$ctrl.evento.imagem.base64">
                        <input type="file" id="evento-image" style="visibility: hidden;" ng-model="$ctrl.evento.imagem" base-sixty-four-input />
                        <label for="evento-image" style="cursor:pointer;">
                            <p>Clique na imagem para alterar-lá</p>
                            <img ng-src="data:image/png;base64,{{$ctrl.evento.imagem.base64}}" style="width:80%;" />
                        </label>
                    </div>

                    <div ng-if="!$ctrl.evento.imagem.base64">
                        <input type="file" id="evento-image" style="visibility: hidden;" ng-model="$ctrl.evento.imagem" base-sixty-four-input />
                        <label for="evento-image" style="cursor:pointer;">
                            <img src="/assets/images/upload.png" style="width:80%;" />
                            <h4 md-title>Envie uma imagem para o evento</h4>
                        </label>
                    </div>
                    
                </md-card>
            </div>
            <div flex-gt-sm="50" flex="50" layout="column">
                <md-card class="{{::$ctrl.styles.cardEvento}}">
                    <md-card-title style=" height: 450px;">
                        <md-card-title-text>
                            <md-input-container md-no-float class="md-headline">
                                <label>Nome do Evento</label>
                                <input ng-model="$ctrl.evento.nome" name="nome" required minlength="3" maxlength="40" />
                                <div ng-messages="novoEventoForm.nome.$error" style="color:red" role="alert">
                                    <div ng-message="required">É necessário preencher um nome.</div>
                                    <div ng-message="minlength">Nome deverá ter no mínimo 3 caractéres.</div>
                                </div>
                                <br>
                                <br>
                                <md-input-container flex="100">
                                    <label>{{ $ctrl.isLoadingEstabelecimentos ? 'Carregando...' : 'Estabelecimento' }}</label>
                                    <md-select name="estabelecimento" ng-model="$ctrl.evento.idEstabelecimento" required/>
                                    <md-option ng-repeat="estabelecimento in $ctrl.estabelecimentos" ng-value="estabelecimento.id">{{ estabelecimento.nome }}</md-option>
                                    </md-select>
                                    <div class="errors" ng-messages="evento.estabelecimento.$error">
                                        <div ng-message="required">Por favor, selecione um Estabelecimento</div>
                                    </div>
                                </md-input-container>
                                <br>
                                <br>
                                <md-input-container flex="100">
                                    <label>{{ $ctrl.isLoadingCategoriaEventos ? 'Carregando...' : 'Categoria do evento' }}</label>
                                    <md-select name="categoria" ng-model="$ctrl.evento.idCategoria" required/>
                                    <md-option ng-repeat="eventoCategoria in $ctrl.eventoCategorias" ng-value="eventoCategoria.id">{{ eventoCategoria.nome }}</md-option>
                                    </md-select>
                                    <div class="errors" ng-messages="evento.estabelecimento.$error">
                                        <div ng-message="required">Por favor, selecione uma categoria</div>
                                    </div>
                                </md-input-container>

                                

                            </md-input-container>

                            <md-card-content>
                                <md-input-container md-no-float class="md-block">
                                    <label>Descrição</label>
                                    <textarea ng-model="$ctrl.evento.descricao" style="padding: 16px;" md-maxlength="150" maxlength="150" required rows="2" md-select-on-focus/></textarea>
                                </md-input-container>
                            </md-card-content>
                            <div>
                                <md-card-content>
                                    <div layout="column">
                                        <div layout="row" layout-align="start" flex>
                                            <div layout="row" flex-gt-md="100" class="range layout-column flex-gt-md-100">
                                                <md-input-container class="md-input-has-placeholder">
                                                    <label></label>
                                                    <input mdc-datetime-picker="" date="true" time="true" type="text" ng-model="$ctrl.evento.data" placeholder="Data"
                                                        max-date="dateTimeEnd" class=" md-input" readonly="readonly" id="input_0">
                                                    <div class="md-errors-spacer"></div>
                                                </md-input-container>
                                            </div>
                                        </div>
                                    </div>
                                </md-card-content>
                            </div>
                            <div ng-show="$ctrl.evento.id !== null">
                                <md-card-content>
                                </md-card-content>
                            </div>
                        </md-card-title-text>
                    </md-card-title>

                </md-card>
            </div>
        </div>

        <div class="md-padding" layout-xs="column" layout="row">
            <div flex-gt-sm="50" flex="50">
                <md-card>
                    <md-toolbar class="md-raised md-primary">
                        <div class="md-toolbar-tools">
                            <h2 class="md-flex">Contatos</h2>
                        </div>
                    </md-toolbar>
                    <div layout="column" layout-padding ng-cloak>
                        <div layout="row" layout-align="start center">
                            <ng-md-icon icon="phone"></ng-md-icon>
                            <md-input-container md-no-float class="md-icon-float md-block">
                                <label>Telefone</label>
                                <input ng-model="$ctrl.evento.telefone" ui-mask="(99) 9?9999-9999" required/>
                            </md-input-container>
                        </div>
                        <div layout="row" layout-align="start center">
                            <ng-md-icon icon="smartphone"></ng-md-icon>
                            <md-input-container md-no-float class="md-icon-float md-block">
                                <label>Celular</label>
                                <input ng-model="$ctrl.evento.celular" ui-mask="(99) 9?9999-9999" />
                            </md-input-container>
                        </div>
                    </div>
                </md-card>
            </div>

            <div flex-gt-sm="50" flex="50" layout="column">
                <md-card>
                    <md-toolbar class="md-raised md-primary">
                        <div class="md-toolbar-tools">
                            <h2 class="md-flex">Endereço</h2>
                        </div>
                    </md-toolbar>
                    <div layout="row" layout-padding ng-cloak>
                        <div flex="60">
                            <md-input-container md-no-float class="md-block">
                                <label>Rua</label>
                                <input ng-model="$ctrl.evento.rua" required />
                            </md-input-container>
                        </div>
                        <div flex="15">
                            <md-input-container md-no-float class="md-block">
                                <label>Nº</label>
                                <input ng-model="$ctrl.evento.numero" type="text" required />
                            </md-input-container>
                        </div>
                        <div flex="35">
                            <md-input-container md-no-float class="md-block">
                                <label>Bairro</label>
                                <input ng-model="$ctrl.evento.bairro" required />
                            </md-input-container>
                        </div>
                    </div>

                    <div layout="row" layout-padding ng-cloak>
                        <div flex="20">
                            <md-input-container md-no-float class="md-block">
                                <label>CEP</label>
                                <input ng-model="$ctrl.evento.cep" required />
                            </md-input-container>
                        </div>

                        <div flex="25">
                            <md-input-container md-no-float class="md-block">
                                <label>Cidade</label>
                                <input ng-model="$ctrl.evento.cidade" required/>
                            </md-input-container>
                        </div>

                        <div flex="40">
                            <md-input-container md-no-float class="md-block">
                                <label>Estado</label>
                                <md-select required name="estado" ng-model="$ctrl.evento.estado" placeholder="UF" class="md-no-underline">
                                    <md-option value="estado">Selecione o Estado</md-option>
                                    <md-option value="AC">Acre</md-option>
                                    <md-option value="AL">Alagoas</md-option>
                                    <md-option value="AM">Amazonas</md-option>
                                    <md-option value="AP">Amapá</md-option>
                                    <md-option value="BA">Bahia</md-option>
                                    <md-option value="CE">Ceará</md-option>
                                    <md-option value="DF">Distrito Federal</md-option>
                                    <md-option value="ES">Espírito Santo</md-option>
                                    <md-option value="GO">Goiás</md-option>
                                    <md-option value="MA">Maranhão</md-option>
                                    <md-option value="MT">Mato Grosso</md-option>
                                    <md-option value="MS">Mato Grosso do Sul</md-option>
                                    <md-option value="MG">Minas Gerais</md-option>
                                    <md-option value="PA">Pará</md-option>
                                    <md-option value="PB">Paraíba</md-option>
                                    <md-option value="PR">Paraná</md-option>
                                    <md-option value="PE">Pernambuco</md-option>
                                    <md-option value="PI">Piauí</md-option>
                                    <md-option value="RJ">Rio de Janeiro</md-option>
                                    <md-option value="RN">Rio Grande do Norte</md-option>
                                    <md-option value="RO">Rondônia</md-option>
                                    <md-option value="RS">Rio Grande do Sul</md-option>
                                    <md-option value="RR">Roraima</md-option>
                                    <md-option value="SC">Santa Catarina</md-option>
                                    <md-option value="SE">Sergipe</md-option>
                                    <md-option value="SP">São Paulo</md-option>
                                    <md-option value="TO">Tocantins</md-option>
                                </md-select>
                            </md-input-container>
                        </div>

                    </div>
                </md-card>
            </div>
        </div>

        <div class="md-padding">
            <div layout="column">
                <md-card>
                    <md-toolbar class="md-raised md-primary">
                        <div class="md-toolbar-tools">
                            <h2 class="md-flex">Localização</h2>
                        </div>
                    </md-toolbar>

                    <!-- Arrumar um jeito de trazer o URL pelo settings.service.js em common service -->
                    <div map-lazy-load="https://maps.googleapis.com/maps/api/js?key=AIzaSyB4jbdsAFxqfnElEl4zpWOepaVrX4F4P18">
                        <ng-map center="{{ $ctrl.evento.rua + ', ' + $ctrl.evento.numbero + ', ' + $ctrl.evento.cidade + ', ' + $ctrl.evento.estado + ', Brasil'}}">
                            <marker position="{{ $ctrl.evento.rua + ', ' + $ctrl.evento.numbero + ', ' + $ctrl.evento.cidade + ', ' + $ctrl.evento.estado + ', Brasil'}}" title="Click to zoom"></marker>
                        </ng-map>
                    </div>

                </md-card>
            </div>
        </div>

        <div layout="row" layout-align="end end" class="text-right">
            <md-button type="button" class="md-raised" ui-sref="evento-list">Cancelar</md-button>
            <md-button type="submit" class="md-primary md-raised">Salvar</md-button>
        </div>
    </form>
</div>